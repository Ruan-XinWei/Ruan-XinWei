<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>初入MVC--从前端到后台 - 小阮笔记</title><meta description="愿你熬得过万丈孤独，藏得下星辰大海"><meta property="og:type" content="blog"><meta property="og:title" content="初入MVC--从前端到后台"><meta property="og:url" content="http://ruan-xinwei.github.io/2020/12/10/%E5%88%9D%E5%85%A5MVC-%E4%BB%8E%E5%89%8D%E7%AB%AF%E5%88%B0%E5%90%8E%E5%8F%B0/"><meta property="og:site_name" content="小阮笔记"><meta property="og:description" content="愿你熬得过万丈孤独，藏得下星辰大海"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://ruan-xinwei.github.io/image/3f07258d4f0c3679730a47831c823a90.jpg"><meta property="article:published_time" content="2020-12-10T02:36:46.000Z"><meta property="article:modified_time" content="2020-12-10T02:41:47.944Z"><meta property="article:author" content="阮新伟"><meta property="article:tag" content="HTML"><meta property="article:tag" content="CSS"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="MVC"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/./image/3f07258d4f0c3679730a47831c823a90.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://ruan-xinwei.github.io/2020/12/10/%E5%88%9D%E5%85%A5MVC-%E4%BB%8E%E5%89%8D%E7%AB%AF%E5%88%B0%E5%90%8E%E5%8F%B0/"},"headline":"小阮笔记","image":["http://ruan-xinwei.github.io/image/3f07258d4f0c3679730a47831c823a90.jpg"],"datePublished":"2020-12-10T02:36:46.000Z","dateModified":"2020-12-10T02:41:47.944Z","author":{"@type":"Person","name":"阮新伟"},"description":"愿你熬得过万丈孤独，藏得下星辰大海"}</script><link rel="canonical" href="http://ruan-xinwei.github.io/2020/12/10/%E5%88%9D%E5%85%A5MVC-%E4%BB%8E%E5%89%8D%E7%AB%AF%E5%88%B0%E5%90%8E%E5%8F%B0/"><link rel="icon" href="/img/avatar.gif"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?7119151b5e6e41695e059a5a9e1f55af";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-172407983-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-172407983-1');</script><script>(function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:1896779,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/prism.css" type="text/css"><link rel="alternate" href="/atom.xml" title="小阮笔记" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatar.gif" alt="小阮笔记" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="/./image/3f07258d4f0c3679730a47831c823a90.jpg" alt="初入MVC--从前端到后台"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-10T02:36:46.000Z" title="2020-12-10T02:36:46.000Z">2020-12-10</time><span class="level-item"> 阮新伟 </span><span class="level-item"><a class="link-muted" href="/categories/MVC/">MVC</a></span><span class="level-item">41 分钟 读完 (大约 6143 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">初入MVC--从前端到后台</h1><div class="content"><p>愿你熬得过万丈孤独，藏得下星辰大海</p>
<a id="more"></a>

<h1 id="客户端技术编程"><a href="#客户端技术编程" class="headerlink" title="客户端技术编程"></a>客户端技术编程</h1><h2 id="一、主要完成内容"><a href="#一、主要完成内容" class="headerlink" title="一、主要完成内容"></a>一、主要完成内容</h2><ol>
<li>使用网页模板进行自定义设计和填充对应内容</li>
<li>添加日间模式和夜间模式切换功能</li>
<li>添加网站部分小功能，例如返回顶部和小部件缓慢切出等功能</li>
</ol>
<h2 id="二、主要功能实现"><a href="#二、主要功能实现" class="headerlink" title="二、主要功能实现"></a>二、主要功能实现</h2><h3 id="网站整体布局"><a href="#网站整体布局" class="headerlink" title="网站整体布局"></a>网站整体布局</h3><ol>
<li>整体采用垂直布局的方式，从上至下依次是顶部导航栏、主要图片和内容的轮播图、主要信息部分、主要内容部分、特征部分、图片轮播图部分、视频展示部分、底部信息部分</li>
<li>在整体下面，每个子部分使用宽度撑满的策略，使其能够依次排列</li>
</ol>
<h3 id="顶部菜单模块"><a href="#顶部菜单模块" class="headerlink" title="顶部菜单模块"></a>顶部菜单模块</h3><ol>
<li>菜单使用弹性盒模型<code>display: flex</code>，使得菜单排列在一行，并且控制每个的标签的<code>padding</code>属性，使其整齐排列</li>
<li>网站名称使用行内盒模型<code>display: inline-block;</code>，并设置<code>white-space: nowrap;</code>，使其不换行，配合<code>padding</code>完成位置布局</li>
</ol>
<h3 id="展示图片的gallery模块"><a href="#展示图片的gallery模块" class="headerlink" title="展示图片的gallery模块"></a>展示图片的gallery模块</h3><ol>
<li>通过JavaScript调整其图片的<code>class</code>为<code>owl-item cloned active</code>或<code>owl-item cloned</code>，配合类选择器选择<code>active</code>来设置样式</li>
<li>动画效果通过设置<code>transform</code>和<code>transition</code>来实现动画效果</li>
</ol>
<h2 id="三、额外功能实现"><a href="#三、额外功能实现" class="headerlink" title="三、额外功能实现"></a>三、额外功能实现</h2><h3 id="日间模式和夜间模式切换"><a href="#日间模式和夜间模式切换" class="headerlink" title="日间模式和夜间模式切换"></a>日间模式和夜间模式切换</h3><ol>
<li><p>简要描述实现过程</p>
<ol>
<li>在右下角设置一个切换按钮，样式设置成太阳和月亮的切换，太阳代表切换成日间模式，月亮代表切换成夜间模式</li>
<li>使用JavaScript获取到此时的模式，并设置在点击的时候实现切换功能</li>
<li>如果切换成夜间模式，主要将背景切换成黑色，并且设置一定的不透明度，再将字体设置为白色，形成一个高对比，然后将切换按钮的图片修改为太阳图标</li>
<li>如果切换成日间模式，主要将样式修改成默认样式，再将切换按钮的图片修改为月亮图标</li>
</ol>
</li>
<li><p>HTML部分</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"right-nav"</span> <span class="attr">id</span>=<span class="string">"right-nav"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"black"</span> <span class="attr">id</span>=<span class="string">"black"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/night.png"</span> <span class="attr">alt</span>=<span class="string">"夜间模式"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>CSS部分</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.right-nav</span> <span class="selector-class">.black</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>JavaScript部分</p>
<ol>
<li><p>点击事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#black"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//功能实现...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取模式信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取对应模式信息，夜间模式或日间模式</span></span><br><span class="line"><span class="keyword">var</span> s = $(<span class="string">"[alt$='间模式']"</span>).attr(<span class="string">"alt"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置对应模式样式</p>
<ol>
<li><p>夜间模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"background-color"</span>, <span class="string">"black"</span>) <span class="comment">//设置背景颜色为黑色</span></span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"opacity"</span>, <span class="string">"0.7"</span>) <span class="comment">//设置不透明度</span></span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"-moz-opacity"</span>, <span class="string">"0.7"</span>)</span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"filter"</span>, <span class="string">"alpha(opacity=50)"</span>) <span class="comment">//设置滤镜</span></span><br><span class="line">$(<span class="string">'body'</span>).append(<span class="string">"&lt;style&gt;::selection &#123;background-color: #d8d5da;color: #fff;&#125;&lt;/style&gt;"</span>) <span class="comment">//设置选中的背景样式</span></span><br><span class="line">$(<span class="string">'.mb-10,.pb-30,p,li,a,span.lnr'</span>).css(<span class="string">"color"</span>, <span class="string">"white"</span>) <span class="comment">//给对应字体设置颜色</span></span><br><span class="line">$(<span class="string">'span.lnr-arrow-up,span.lnr-arrow-down'</span>).css(<span class="string">"color"</span>, <span class="string">"#222"</span>) <span class="comment">//给箭头设置颜色</span></span><br><span class="line">$(<span class="string">'.project-area,.info-content,.single-feature,.gallery-area'</span>).css(<span class="string">"background-color"</span>, <span class="string">"black"</span>) <span class="comment">//给对应模块设置背景样式</span></span><br><span class="line">$(<span class="string">'.header-btn'</span>).css(<span class="string">"background-color"</span>, <span class="string">"transparent"</span>) <span class="comment">//设置对应按钮背景颜色透明</span></span><br><span class="line">$(<span class="string">'.info-content'</span>).append(<span class="string">"&lt;style&gt;.info-area .info-content::after&#123;background-color: black&#125;&lt;/style&gt;"</span>) <span class="comment">//给对应元素添加样式</span></span><br><span class="line">$(<span class="string">'.active-works-carousel .owl-dots .owl-dot.active'</span>).css(<span class="string">"background"</span>, <span class="string">"#777777;"</span>) <span class="comment">//设置背景颜色</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>日间模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"background-color"</span>, <span class="string">""</span>);  <span class="comment">//设置为默认背景颜色</span></span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"opacity"</span>, <span class="string">""</span>)    <span class="comment">//取消不透明</span></span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"-moz-opacity"</span>, <span class="string">""</span>)</span><br><span class="line">$(<span class="string">'body'</span>).css(<span class="string">"filter"</span>, <span class="string">""</span>) <span class="comment">//取消滤镜</span></span><br><span class="line"><span class="comment">//给对应部件设置样式</span></span><br><span class="line">$(<span class="string">'body'</span>).append(<span class="string">"&lt;style&gt;::selection &#123;background-color: #b01afe;color: #fff;&#125;&lt;/style&gt;"</span>)</span><br><span class="line">$(<span class="string">'.mb-10,.pb-30,p,li,a,span.lnr'</span>).css(<span class="string">"color"</span>, <span class="string">""</span>)</span><br><span class="line">$(<span class="string">'.project-area,.info-content,.single-feature,.gallery-area'</span>).css(<span class="string">"background-color"</span>, <span class="string">""</span>)</span><br><span class="line">$(<span class="string">'.header-btn'</span>).css(<span class="string">"background-color"</span>, <span class="string">"white"</span>)</span><br><span class="line">$(<span class="string">'.info-content'</span>).append(<span class="string">"&lt;style&gt;.info-area .info-content::after&#123;background-color: white&#125;&lt;/style&gt;"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>切换功能</p>
<ol>
<li><p>夜间模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"[alt='夜间模式']"</span>).attr(&#123;</span><br><span class="line">    <span class="string">"src"</span>: <span class="string">"img/sum.png"</span>,</span><br><span class="line">    <span class="string">"alt"</span>: <span class="string">"日间模式"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>日间模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"[alt='日间模式']"</span>).attr(&#123;</span><br><span class="line">    <span class="string">"src"</span>: <span class="string">"img/night.png"</span>,</span><br><span class="line">    <span class="string">"alt"</span>: <span class="string">"夜间模式"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="缓慢切入"><a href="#缓慢切入" class="headerlink" title="缓慢切入"></a>缓慢切入</h3><ol>
<li><p>简要描述实现过程</p>
<ol>
<li>使用选择器，选择到对应的元素后，设置<code>transition: 5s</code>，将如果某个属性发生改变，则在5s内缓慢改变</li>
<li>通过JavaScript实现在加载的时候，修改这个元素的位置，配合css的设置，则实现了缓慢切入的动画</li>
</ol>
</li>
<li><p>css部分</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.right-nav</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">    transition: 5s;	//设置transition后，right从—30px变化到20px的过程总共花费5s</span><br><span class="line">    <span class="selector-tag">cursor</span>: <span class="selector-tag">pointer</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Javascript部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"right-nav"</span>).style.right = <span class="string">"20px"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="四、主要结果截图"><a href="#四、主要结果截图" class="headerlink" title="四、主要结果截图"></a>四、主要结果截图</h2><ol>
<li>日间模式和夜间模式的切换<ol>
<li>夜间模式<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222117.png" alt="image-20201203195629581" style="zoom: 33%;" /></li>
<li>日间模式<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222118.png" alt="image-20201203195517289" style="zoom:33%;" /></li>
</ol>
</li>
<li>右下角的功能按钮<br><img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222119.png" alt="image-20201203195547084"></li>
<li>整体实现效果<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222120.png" alt="image-20201203195927749" style="zoom:33%;" />

</li>
</ol>
<div STYLE="page-break-after: always;"></div>

<h1 id="JavaScript编程"><a href="#JavaScript编程" class="headerlink" title="JavaScript编程"></a>JavaScript编程</h1><h2 id="一、主要完成内容-1"><a href="#一、主要完成内容-1" class="headerlink" title="一、主要完成内容"></a>一、主要完成内容</h2><ol>
<li>随机生成4位的字母和数字组合的验证码</li>
<li>实现通过滑块进行图片验证</li>
</ol>
<h2 id="二、主要功能实现-1"><a href="#二、主要功能实现-1" class="headerlink" title="二、主要功能实现"></a>二、主要功能实现</h2><h3 id="随机产生一个四位验证码"><a href="#随机产生一个四位验证码" class="headerlink" title="随机产生一个四位验证码"></a>随机产生一个四位验证码</h3><ol>
<li><p>makeCode()：随机产生一个四位验证码的主要函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//产生一个四位验证码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeCode</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    string = <span class="string">""</span> <span class="comment">//初始验证码为空</span></span><br><span class="line">    <span class="keyword">var</span> code = <span class="built_in">document</span>.getElementById(<span class="string">"code-main"</span>) <span class="comment">//DOM获取元素</span></span><br><span class="line">    code.onclick = makeCode <span class="comment">//设置code点击事件</span></span><br><span class="line">    refresh.onclick = makeCode  <span class="comment">//设置refresh点击事件</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;    <span class="comment">//总共产生4位</span></span><br><span class="line">        string += createChar()  <span class="comment">//每次添加一个随机位</span></span><br><span class="line">    &#125;</span><br><span class="line">    code.innerHTML = string <span class="comment">//修改HTML数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>createChar()：随机产生一个字符a-z,A-Z,0-9</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createChar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()) == <span class="number">0</span>    <span class="comment">//随机确定是字母还是数字</span></span><br><span class="line">    <span class="keyword">if</span>(num == <span class="literal">true</span>) &#123;   <span class="comment">//如果是数字，则返回0-9</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()*<span class="number">9</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;  <span class="comment">//如果是字母</span></span><br><span class="line">        <span class="keyword">var</span> char =  <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random() * <span class="number">25</span>))    <span class="comment">//随机产生一个字母</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()) == <span class="number">0</span>) &#123;    <span class="comment">//确定大小写</span></span><br><span class="line">            <span class="keyword">return</span> char.toLowerCase()   <span class="comment">//返回小写</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> char <span class="comment">//返回大写</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="验证四位验证码是否正确"><a href="#验证四位验证码是否正确" class="headerlink" title="验证四位验证码是否正确"></a>验证四位验证码是否正确</h3><ol start="2">
<li><p>testCode()：进行验证码验证</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testCode</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// console.log("success")</span></span><br><span class="line">    <span class="built_in">console</span>.log(char_code.value)</span><br><span class="line">    <span class="keyword">if</span> (char_code.value == string) &#123;    <span class="comment">//如果输入与随机产生相同</span></span><br><span class="line">        alert(<span class="string">"字符验证码验证成功！"</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;    <span class="comment">//如果不同</span></span><br><span class="line">        alert(<span class="string">"字符验证码验证失败！"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    location.reload()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="随机产生一个图片缺口"><a href="#随机产生一个图片缺口" class="headerlink" title="随机产生一个图片缺口"></a>随机产生一个图片缺口</h3><ol>
<li><p>selectSection()：随机挑选图片中的一部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectSection</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.getElementById(<span class="string">"img"</span>)    <span class="comment">//DOM获取id为img的元素</span></span><br><span class="line">    <span class="keyword">var</span> height_string = img.getAttribute(<span class="string">"height"</span>)  <span class="comment">//获取元素的高度</span></span><br><span class="line">    <span class="keyword">var</span> img_height = height_string.substring(<span class="number">0</span>, height_string.indexOf(<span class="string">"px"</span>))    <span class="comment">//获取实际像素值</span></span><br><span class="line">    <span class="keyword">var</span> img_url = img.getAttribute(<span class="string">"src"</span>)   <span class="comment">//获取图片地址</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置成功位置的位置</span></span><br><span class="line">    success_section.style.top = success_position_y + <span class="string">"px"</span></span><br><span class="line">    success_section.style.left = success_position_x + <span class="string">"px"</span></span><br><span class="line">    <span class="comment">//进行按钮位置微调</span></span><br><span class="line">    section.style.top = success_position_y - img_height - <span class="number">6</span> + <span class="string">"px"</span></span><br><span class="line">    <span class="comment">//获取图片缺省部分</span></span><br><span class="line">    section.style.background = <span class="string">"url("</span> + img_url + <span class="string">") -"</span> + success_position_x + <span class="string">"px -"</span> + success_position_y + <span class="string">"px/auto "</span> + img_height + <span class="string">"px"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="随机产生图片"><a href="#随机产生图片" class="headerlink" title="随机产生图片"></a>随机产生图片</h3><ol>
<li><p>randomImage()：随机产生图片</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomImage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.getElementById(<span class="string">"img"</span>)    <span class="comment">//获取图片元素</span></span><br><span class="line">    <span class="keyword">var</span> num = <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random()*<span class="number">5</span>) + <span class="number">1</span>;   <span class="comment">//随机产生图片序号</span></span><br><span class="line">    img_num = (img_num + num)%<span class="number">5</span> + <span class="number">2</span> <span class="comment">//适配本地图片序号</span></span><br><span class="line">    <span class="keyword">var</span> img_src = <span class="string">"./img/img"</span>+ img_num +<span class="string">".png"</span>  <span class="comment">//生成对应地址</span></span><br><span class="line">    img.setAttribute(<span class="string">"src"</span>,img_src) <span class="comment">//修改图片</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="通过滑块进行图片验证"><a href="#通过滑块进行图片验证" class="headerlink" title="通过滑块进行图片验证"></a>通过滑块进行图片验证</h3><ol>
<li><p>buttonDown(e)：图片button点击事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buttonDown</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//清除样式</span></span><br><span class="line">    button.style.transition = <span class="string">""</span></span><br><span class="line">    background.style.transition = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取button开始位置</span></span><br><span class="line">    <span class="keyword">var</span> e = e || <span class="built_in">window</span>.event || e.which;</span><br><span class="line">    start_button_position = e.clientX</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.onmousemove = buttonMove   <span class="comment">//设置鼠标移动事件</span></span><br><span class="line">    <span class="built_in">document</span>.onmouseup = buttonUp   <span class="comment">//设置鼠标松开事件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>buttonMove(e)：图片button移动事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buttonMove</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> button_move = e.clientX <span class="comment">//获取移动的位置</span></span><br><span class="line">    <span class="comment">//获取移动的长度</span></span><br><span class="line">    move_length = moveLength(button_move - start_button_position, <span class="number">0</span>, max_length)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改移动过程中的样式</span></span><br><span class="line">    button.style.left = move_length + <span class="string">"px"</span></span><br><span class="line">    background.style.width = move_length + <span class="number">20</span> + <span class="string">"px"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>buttonUp()：图片button鼠标松开</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buttonUp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> abs = <span class="built_in">Math</span>.abs(move_length - success_length)    <span class="comment">//获取移动的距离和需要移动的距离的差值</span></span><br><span class="line">    <span class="keyword">if</span> (abs &gt;= <span class="number">5</span>) &#123; <span class="comment">//如果超过5px的偏差，则失败，重新调整按钮位置</span></span><br><span class="line">        button.style.left = <span class="string">""</span></span><br><span class="line">        background.style.width = <span class="string">""</span></span><br><span class="line">        <span class="comment">//控制其缓慢移动</span></span><br><span class="line">        button.style.transition = <span class="string">"left 0.8s linear"</span></span><br><span class="line">        background.style.transition = <span class="string">"width 0.8s linear"</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;    <span class="comment">//否则就验证成功</span></span><br><span class="line">        successMove()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//取消事件，重新开始</span></span><br><span class="line">    <span class="built_in">document</span>.onmousemove = <span class="literal">null</span></span><br><span class="line">    <span class="built_in">document</span>.onmouseup = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>moveLength(length, min, max)：返回一个符合规范的移动长度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveLength</span>(<span class="params">length, min, max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (length &lt; min) &#123; <span class="comment">//如果小于最低要求，则返回最低要求</span></span><br><span class="line">        <span class="keyword">return</span> min</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (length &gt; max) &#123;  <span class="comment">//如果超过最高要求，则返回最高要求</span></span><br><span class="line">        <span class="keyword">return</span> max</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> length   <span class="comment">//正常返回</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>successMove()：成功对齐执行函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">successMove</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    success = <span class="literal">true</span>  <span class="comment">//设置状态为true</span></span><br><span class="line">    text.innerHTML = <span class="string">"解锁成功"</span> <span class="comment">//修改HTML内容</span></span><br><span class="line">    background.style.backgroundColor = <span class="string">"lightgreen"</span> <span class="comment">//修改背景颜色</span></span><br><span class="line">    <span class="comment">// icon.className = "fas fa-thumbs-up"</span></span><br><span class="line">    icon.className = <span class="string">"icon iconfont iconicon_xuanzhong"</span> <span class="comment">//更换图标</span></span><br><span class="line">    icon.style.color = <span class="string">"green"</span>  <span class="comment">//设置颜色</span></span><br><span class="line">    <span class="comment">//取消对应事件</span></span><br><span class="line">    button.onmousedown = <span class="literal">null</span></span><br><span class="line">    <span class="built_in">document</span>.onmousemove = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//延时100ms后弹出结果，并在确认后刷新</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"图片解锁成功！"</span>)</span><br><span class="line">        location.reload()</span><br><span class="line">    &#125;, <span class="number">100</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="三、额外功能实现-1"><a href="#三、额外功能实现-1" class="headerlink" title="三、额外功能实现"></a>三、额外功能实现</h2><h3 id="自动获取焦点"><a href="#自动获取焦点" class="headerlink" title="自动获取焦点"></a>自动获取焦点</h3><ol>
<li><p>简要描述：设置输入框的<code>autofocus</code>属性为<code>autofocus</code></p>
</li>
<li><p>代码实现</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"char-input"</span> <span class="attr">autofocus</span>=<span class="string">"autofocus"</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="监听回车"><a href="#监听回车" class="headerlink" title="监听回车"></a>监听回车</h3><ol>
<li><p>简要描述：在输入完毕后可以直接在输入框中输入回车，则进行验证字符验证码</p>
</li>
<li><p>代码实现</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">char_code.onkeypress = listenDown</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listenDown</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = e || <span class="built_in">window</span>.event || e.which;</span><br><span class="line">    <span class="keyword">if</span>(e.keyCode == <span class="number">13</span>) &#123;   <span class="comment">//如果是回车，进行验证码验证</span></span><br><span class="line">        testCode()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="四、主要样式实现"><a href="#四、主要样式实现" class="headerlink" title="四、主要样式实现"></a>四、主要样式实现</h2><ol>
<li><p>简要描述</p>
<ol>
<li>布局问题：整体大概划分了两个部分，左边字符验证部分和右边的图片验证部分，主要使用的是设置一个主div，和两个子div，然后两个子div进行<code>float: left</code>浮动起来，形成两个同时水平排列</li>
<li>矢量图标问题：这次实现过程中，不仅使用了阿里的矢量图标库，也使用了iconfont的矢量图标库，两者既有差别又有很多相似之处</li>
</ol>
</li>
<li><p>主要实现部分</p>
<ol>
<li><p>布局问题</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.char-code &#123;	//字符验证部分</span><br><span class="line">    <span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">    <span class="selector-tag">margin</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">width</span>: 270<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.captcha &#123;	//图片验证部分</span><br><span class="line">    <span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">    <span class="selector-tag">width</span>: 400<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">margin</span>: 0<span class="selector-tag">px</span> <span class="selector-tag">auto</span>;</span><br><span class="line">    <span class="selector-tag">margin-top</span>: 50<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>矢量图标问题</p>
<ol>
<li><p>阿里矢量图标</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"ali-font/iconfont.css"</span>&gt;</span>	<span class="comment">&lt;!-- 引入阿里库 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon iconfont iconicon-doubleright-line"</span> <span class="attr">id</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>	<span class="comment">&lt;!-- 右移动图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon iconfont iconicon_xuanzhong"</span> <span class="attr">id</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>	<span class="comment">&lt;!-- 成功图标 --&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>iconfont矢量图标</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入iconfont库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./fa/css/all.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./iconfont/iconfont.css"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-sync fa-spin"</span> <span class="attr">id</span>=<span class="string">"refresh"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="comment">&lt;!-- 刷新图标 --&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="五、主要结果截图"><a href="#五、主要结果截图" class="headerlink" title="五、主要结果截图"></a>五、主要结果截图</h2><ol>
<li>主界面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222121.png" alt="image-20201203210739285" style="zoom:33%;" /></li>
<li>字符验证成功界面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222122.png" alt="image-20201203210846826" style="zoom:33%;" /></li>
<li>图片验证成功界面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222123.png" alt="image-20201203210914244" style="zoom:33%;" />

</li>
</ol>
<div STYLE="page-break-after: always;"></div>

<h1 id="GuestBookSystem"><a href="#GuestBookSystem" class="headerlink" title="GuestBookSystem"></a>GuestBookSystem</h1><h2 id="一、主要完成内容-2"><a href="#一、主要完成内容-2" class="headerlink" title="一、主要完成内容"></a>一、主要完成内容</h2><ol>
<li>使用ASP.NET MVC + Code First技术完成留言本系统</li>
<li>具有普通用户和管理员用户两个角色</li>
<li>普通用户具有登录，注册，发布个人留言，阅读全部留言，显示个人留言等功能</li>
<li>管理员用户具有登录，注册，审核留言，删除留言，阅读留言等功能</li>
<li>并且该留言本系统具有用户审核等功能</li>
</ol>
<h2 id="二、主要功能实现-2"><a href="#二、主要功能实现-2" class="headerlink" title="二、主要功能实现"></a>二、主要功能实现</h2><h3 id="非特定角色功能"><a href="#非特定角色功能" class="headerlink" title="非特定角色功能"></a>非特定角色功能</h3><ol>
<li><p>登录功能</p>
<ol>
<li><p>登录验证简要逻辑</p>
<ol>
<li><p>首先在视图中进行输入账号密码，在前端首先进行验证</p>
</li>
<li><p>如果前端输入出现异常，则前端进行简要格式验证，并将错误信息返还给用户，进行提示</p>
<blockquote>
<ol>
<li>对应的输入使用Razor，以便能够简单验证输入的数据</li>
<li>保存错误信息使用<code>@Html.ValidationSummary()</code>，添加在页面中，但是进行隐藏，前端不直接显示，而通过JavaScript的<code>alert</code>进行简易的弹窗</li>
</ol>
</blockquote>
</li>
<li><p>如果通过前端简要验证，则通过POST传输到后台<code>Account/Login</code>，后台进行数据库查询</p>
<ol>
<li>如果没有这条记录，则提示登录失败的信息，并返回登录视图，给用户重新登录</li>
<li>如果查询到对应记录，则辨别是管理员还是普通用户，如果是管理员则跳转到<code>Admin/Index</code>，如果是普通用户则跳转到<code>User/AllWords</code>，再进行后续操作</li>
</ol>
</li>
</ol>
</li>
<li><p>登录功能前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@model GuestBookSystem.Models.User</span><br><span class="line">@&#123;</span><br><span class="line">    ViewBag.Title = "Login";</span><br><span class="line">    Layout = "~/Views/Shared/_LayoutAccount.cshtml";</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@using (Html.BeginForm("Login", "Account", new &#123; ReturnUrl = "" &#125;, FormMethod.Post))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        @Html.TextBoxFor(a =&gt; a.Name, new &#123; @placeholder = "用户名" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">        @Html.TextBoxFor(a =&gt; a.Password, new &#123; @placeholder = "密码", @type = "password" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span> <span class="attr">id</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">hidden</span> <span class="attr">id</span>=<span class="string">"hidden"</span>&gt;</span>@Html.ValidationSummary()<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>登录验证后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在数据库中查找对应账号密码</span><br><span class="line">var dbUser &#x3D; db.Users.Where(</span><br><span class="line">    a &#x3D;&gt; a.Name &#x3D;&#x3D; user.Name &amp;&amp; </span><br><span class="line">    a.Password &#x3D;&#x3D; user.Password).FirstOrDefault();</span><br><span class="line">if (dbUser !&#x3D; null) &#x2F;&#x2F;如果能找到对应账号密码</span><br><span class="line">&#123;</span><br><span class="line">    ViewBag.STATE &#x3D; true;   &#x2F;&#x2F;记录登录状态</span><br><span class="line">    if (dbUser.SRole.ToString() &#x3D;&#x3D; &quot;管理员&quot;)   &#x2F;&#x2F;如果是管理员</span><br><span class="line">    &#123;</span><br><span class="line">        Session[&quot;UserId&quot;] &#x3D; dbUser.UserId;  &#x2F;&#x2F;记录UserId</span><br><span class="line">        return RedirectToAction(&quot;Index&quot;, &quot;Admin&quot;);  &#x2F;&#x2F;跳转Admin&#x2F;Index</span><br><span class="line">    &#125;</span><br><span class="line">    else if (dbUser.SRole.ToString() &#x3D;&#x3D; &quot;普通用户&quot;) &#x2F;&#x2F;如果是普通用户</span><br><span class="line">    &#123;</span><br><span class="line">        Session[&quot;UserId&quot;] &#x3D; dbUser.UserId;</span><br><span class="line">        return RedirectToAction(&quot;AllWords&quot;, &quot;User&quot;);    &#x2F;&#x2F;跳转User&#x2F;AllWords</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>注册功能</p>
<ol>
<li><p>注册功能简要逻辑</p>
<ol>
<li><p>首先在视图中进行输入账号密码，在前端首先进行验证</p>
</li>
<li><p>如果前端输入出现异常，则前端进行简要格式验证，并将错误信息返还给用户，进行提示</p>
<blockquote>
<p>实现提示逻辑和登录功能相似，都是使用<code>@Html.ValidationSummary()</code></p>
</blockquote>
</li>
<li><p>如果通过前端简要验证，则通过POST传输到后台<code>Account/Register</code>，后台进行注册验证</p>
<ol>
<li>如果注册失败，则提示注册失败的信息，并返回注册视图，给用户重新注册</li>
<li>如果注册成功，则跳转到登录界面，便于用户的登录</li>
</ol>
</li>
</ol>
</li>
<li><p>注册功能前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@using (Html.BeginForm("Register", "Account", FormMethod.Post))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">        @Html.TextBoxFor(a =&gt; a.Email, new &#123; @placeholder = "注册邮箱" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        @Html.TextBoxFor(a =&gt; a.Name, new &#123; @placeholder = "注册用户名" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">        @Html.TextBoxFor(a =&gt; a.Password, new &#123; @placeholder = "注册密码" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"srole"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">            注册角色:</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"SRole"</span> <span class="attr">name</span>=<span class="string">"SRole"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span>管理员<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">selected</span>&gt;</span>普通用户<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span> <span class="attr">id</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">hidden</span> <span class="attr">id</span>=<span class="string">"hidden"</span>&gt;</span>@Html.ValidationSummary()<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注册功能后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[HttpPost]</span><br><span class="line">public ActionResult Register(User user)</span><br><span class="line">&#123;</span><br><span class="line">    if (ModelState.IsValid) &#x2F;&#x2F;如果状态通过</span><br><span class="line">    &#123;</span><br><span class="line">        db.Users.Add(user); &#x2F;&#x2F;在数据库中添加这个记录</span><br><span class="line">        db.SaveChanges();   &#x2F;&#x2F;保存数据库</span><br><span class="line">        return RedirectToAction(&quot;Login&quot;);   &#x2F;&#x2F;跳转到&#x2F;Login</span><br><span class="line">    &#125;</span><br><span class="line">    return View();  &#x2F;&#x2F;如果不通过，则返回注册视图</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>主页阅读留言功能</p>
<ol>
<li><p>留言功能实现逻辑</p>
<ol>
<li>通过数据库进行查询状态为通过的留言，并更加创建时间进行倒序，并将数据传送给前端</li>
<li>前端通过<code>@foreach</code>，进行遍历输出对应字段</li>
</ol>
</li>
<li><p>留言功能前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@foreach (var gb in Model)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"username"</span>&gt;</span>@gb.User.Name :<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"context"</span>&gt;</span>@gb.Content<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"date"</span>&gt;</span>@gb.CreatedOn<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>留言功能后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GBSDBContext db &#x3D; new GBSDBContext();   &#x2F;&#x2F;数据库</span><br><span class="line">&#x2F;&#x2F; GET: GuestBook</span><br><span class="line">public ActionResult Index()</span><br><span class="line">&#123;</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Where(a &#x3D;&gt; a.isPass &#x3D;&#x3D; true);    &#x2F;&#x2F;如果查询到状态为通过的留言</span><br><span class="line">    return View(gb.OrderByDescending(a&#x3D;&gt;a.CreatedOn).ToList()); &#x2F;&#x2F;则根据创建留言时间进行倒序</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h3 id="普通用户功能"><a href="#普通用户功能" class="headerlink" title="普通用户功能"></a>普通用户功能</h3><ol>
<li><p>发布个人留言</p>
<ol>
<li><p>发布个人留言简要逻辑</p>
<ol>
<li>首先在前端进行个人留言的输入，如果出现格式错误，则会在前端就进行提醒，使用的逻辑还是<code>@Html.ValidationSummary()</code>，和前面相同</li>
<li>前端验证格式成功之后，通过POST方式，提交到后台的<code>User/CreateWords</code>，再进行处理</li>
<li>后台首先获取登录的ID，自动添加到留言本中，再将留言本的这条记录保存到数据库中，最后将个人留言界面返回给用户</li>
</ol>
</li>
<li><p>发布个人留言前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/User/CreateWords"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"second"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>标题：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>@Html.TextBoxFor(g =&gt; g.Title, new &#123; @autocomplete = "off", autofocus="autofocus"&#125;)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>@Html.TextAreaFor(g =&gt; g.Content, new &#123; cols = 50, rows = 10 &#125;)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"发布"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>发布个人留言后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (ModelState.IsValid)</span><br><span class="line">&#123;</span><br><span class="line">    gb.User &#x3D; db.Users.Where(a &#x3D;&gt; a.UserId &#x3D;&#x3D; UserId).FirstOrDefault(); &#x2F;&#x2F;找到登录用户的ID，自动添加到留言本中</span><br><span class="line">    &#x2F;&#x2F;gb.CreatedOn &#x3D; System.DateTime.Now;</span><br><span class="line">    db.Guestbooks.Add(gb);  &#x2F;&#x2F;在数据库中添加这条记录</span><br><span class="line">    db.SaveChanges();   &#x2F;&#x2F;保存数据库</span><br><span class="line">    return RedirectToAction(&quot;MyWords&quot;); &#x2F;&#x2F;跳转到&#x2F;User&#x2F;MyWords，显示个人留言</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>显示个人留言</p>
<ol>
<li><p>显示个人留言简要逻辑</p>
<ol>
<li>后台通过登录用户的ID，在数据库中进行查找，查找到的结果通过创建时间逆序传递给前端</li>
<li>前端通过<code>foreach</code>进行遍历，将结果进行输出，特别地是在是否通过审核这一栏，进行<code>if</code>判断，如果通过则显示<code>审核通过</code>，否则显示<code>正在审核</code></li>
</ol>
</li>
<li><p>显示个人留言前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@foreach (var gb in Model)</span><br><span class="line">&#123;</span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.User.Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.CreatedOn<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Title<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Content<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"pass"</span>&gt;</span></span><br><span class="line">            @if (gb.isPass == true)</span><br><span class="line">            &#123;@Html.DisplayName("审核通过") &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;@Html.DisplayName("正在审核")&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示个人留言后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var gb &#x3D; db.Guestbooks.Where(a &#x3D;&gt; a.User.UserId &#x3D;&#x3D; UserId);</span><br><span class="line">return View(gb.OrderByDescending(a&#x3D;&gt;a.CreatedOn).ToList());</span><br></pre></td></tr></table></figure>



</li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>显示全部留言</p>
<ol>
<li><p>显示全部留言简要逻辑</p>
<ol>
<li>使用的整体逻辑和主界面阅读全部留言类似</li>
<li>特别地是在普通用户界面可以较为详细地查看留言，例如可以多查看到留言本标题</li>
</ol>
</li>
<li><p>显示全部留言前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@foreach (var gb in Model)</span><br><span class="line">&#123;</span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.User.Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.CreatedOn<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Title<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Content<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示全部留言后台代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult AllWords()</span><br><span class="line">&#123;</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Where(a &#x3D;&gt; a.isPass &#x3D;&#x3D; true);</span><br><span class="line">    return View(gb.OrderByDescending(a&#x3D;&gt;a.CreatedOn).ToList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h3 id="管理员功能"><a href="#管理员功能" class="headerlink" title="管理员功能"></a>管理员功能</h3><ol>
<li><p>审核留言</p>
<ol>
<li><p>审核留言简要逻辑</p>
<ol>
<li>后台首先获取到所有未通过审核的留言，将这些留言按照创建时间逆序传递给前端</li>
<li>前端将这些留言进行显示，并在每一条留言后面都添加一个<code>审核通过</code>的按钮</li>
<li>点击<code>审核通过</code>的按钮，则跳转到<code>Admin/CheckMessageToFind</code>，进行确认是否通过审核</li>
<li>再显示确认通过审核的界面，让管理员用户进行进一步操作</li>
</ol>
</li>
<li><p>审核留言前端代码</p>
<ol>
<li><p>显示未通过审核的留言</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@foreach (var gb in Model)</span><br><span class="line">&#123;</span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.User.Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.CreatedOn<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Title<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Content<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span>@Html.ActionLink("审核通过", "CheckMessageToFind", new &#123; id = gb.GuestbookId &#125;)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认通过审核</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@using (Html.BeginForm())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"confirmed"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>确认是否通过<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>留言人：@Model.User.Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容：@Model.Content<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>时间：@Model.CreatedOn<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"确认"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        @Html.ActionLink("X", "CheckIndex", new &#123; &#125;, new &#123; @class = "close" &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>审核留言后台代码</p>
<ol>
<li><p>显示所有未通过审核的留言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult CheckIndex()</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Where(a &#x3D;&gt; a.isPass &#x3D;&#x3D; false);   &#x2F;&#x2F;获取没有通过审核的留言本</span><br><span class="line">    return View(gb.OrderByDescending(a&#x3D;&gt;a.CreatedOn).ToList()); &#x2F;&#x2F;通过创建时间逆序，并传递给前端</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认是否通过审核</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult CheckMessageToFind(int id)</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Find(id);    &#x2F;&#x2F;查找到留言本ID</span><br><span class="line">    return View(gb);    &#x2F;&#x2F;返回确认界面，给管理员用户确认是否通过审核</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果审核通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[HttpPost, ActionName(&quot;CheckMessageToFind&quot;)]</span><br><span class="line">public ActionResult CheckMessage(int id)</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Find(id);    &#x2F;&#x2F;获取留言本ID</span><br><span class="line">    gb.isPass &#x3D; true;   &#x2F;&#x2F;将通过状态设置为true</span><br><span class="line">    db.SaveChanges();   &#x2F;&#x2F;保存数据库</span><br><span class="line">    return RedirectToAction(&quot;CheckIndex&quot;);  &#x2F;&#x2F;返回到Admin&#x2F;CheckIndex，显示还未通过的留言</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
<li><p>删除留言</p>
<ol>
<li><p>删除留言简要逻辑</p>
<ol>
<li>后台首先获取到所有可删除的留言，将这些留言按照创建时间逆序传递给前端</li>
<li>前端将这些留言进行显示，并在每一条留言后面都添加一个<code>删除留言</code>的按钮</li>
<li>点击<code>删除留言</code>的按钮，则跳转到`Admin/Delete，进行确认是否删除</li>
<li>再显示确认删除的界面，让管理员用户进行进一步操作</li>
</ol>
</li>
<li><p>删除留言前端代码</p>
<ol>
<li><p>显示所有能删除的留言</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@foreach (var gb in Model)</span><br><span class="line">&#123;</span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.User.Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.CreatedOn<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Title<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>@gb.Content<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span>@Html.ActionLink("删除留言", "Delete", new &#123; id = gb.GuestbookId &#125;)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认是否删除留言</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@using (Html.BeginForm())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"confirmed"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>确认是否删除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>留言人：@Model.User.Name<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容：@Model.Content<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>时间：@Model.CreatedOn<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"确认"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        @Html.ActionLink("X","Index", new &#123; &#125;, new &#123; @class="close"&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>删除留言后台代码</p>
<ol>
<li><p>显示所有可删除的留言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult Index()</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    return View(db.Guestbooks.OrderByDescending(db &#x3D;&gt; db.CreatedOn).ToList());  &#x2F;&#x2F;通过创建时间逆序，传递给前端</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>是否删除留言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult Delete(int id)</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Find(id);    &#x2F;&#x2F;找到这条留言的ID</span><br><span class="line">    return View(gb);    &#x2F;&#x2F;返回确认删除的视图</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>确认删除这条留言</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[HttpPost, ActionName(&quot;Delete&quot;)]</span><br><span class="line">public ActionResult DeleteConfirmed(int id)</span><br><span class="line">&#123;</span><br><span class="line">    GetUser();</span><br><span class="line">    var gb &#x3D; db.Guestbooks.Find(id);    &#x2F;&#x2F;找到这条留言的ID</span><br><span class="line">    db.Guestbooks.Remove(gb);   &#x2F;&#x2F;在数据库中删除这条留言</span><br><span class="line">    db.SaveChanges();   &#x2F;&#x2F;保存数据库</span><br><span class="line">    return RedirectToAction(&quot;Index&quot;);   &#x2F;&#x2F;返回&#x2F;Admin&#x2F;Index</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="三、部分额外功能"><a href="#三、部分额外功能" class="headerlink" title="三、部分额外功能"></a>三、部分额外功能</h2><h3 id="超长文本省略处理"><a href="#超长文本省略处理" class="headerlink" title="超长文本省略处理"></a>超长文本省略处理</h3><ol>
<li><p>功能实现简要描述</p>
<ol>
<li>超长文本进行省略处理，鼠标移动上去显示全文</li>
<li>在CSS中设置空白处理方式：不换行，超出部分隐藏和文本超出使用省略号</li>
<li>在JavaScript中获取到所有<code>span</code>标签，遍历所有的<code>span</code>如果其中文字的宽度大于元素的宽度，则将该<code>span</code>标签的<code>title</code>属性设置为其内容</li>
</ol>
</li>
<li><p>CSS部分（以主页留言本显示为例）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.guestbook</span> <span class="selector-class">.main</span> <span class="selector-class">.list</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>JavaScript部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> spans = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"span"</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; spans.length; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (spans[i].scrollWidth &gt; spans[i].offsetWidth) &#123;</span><br><span class="line">        spans[i].setAttribute(<span class="string">"title"</span>, spans[i].innerText)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="用户验证"><a href="#用户验证" class="headerlink" title="用户验证"></a>用户验证</h3><ol>
<li><p>功能实现简要描述</p>
<ol>
<li>必须登录后才可以使用普通用户和管理员操作</li>
<li>在普通用户控制器<code>User</code>和管理员控制器<code>Admin</code>中添加<code>[Authorize]</code></li>
<li>如果在未登录的情况下，直接使用<code>User</code>或<code>Admin</code>中的方法，则会重定向到登录界面</li>
<li>只有在对应角色登录后，才可以使用对应角色的方法</li>
<li>在使用完对应角色的方法后，可以使用退出功能，进行账号退出</li>
</ol>
</li>
<li><p>功能实现后台代码</p>
<ol>
<li><p>Web.confi设置为表单验证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;authentication mode&#x3D;&quot;Forms&quot;&gt;</span><br><span class="line">    &lt;forms loginUrl&#x3D;&quot;&#x2F;Account&#x2F;LoginFirst&quot; defaultUrl&#x3D;&quot;&#x2F;&quot; timeout&#x3D;&quot;30&quot; path&#x3D;&quot;&#x2F;&quot;&gt;</span><br><span class="line">    &lt;&#x2F;forms&gt;</span><br><span class="line">&lt;&#x2F;authentication&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Login方法中进行设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FormsAuthenticationTicket ticket &#x3D; new FormsAuthenticationTicket(1, user.UserId.ToString(), DateTime.Now, DateTime.Now.AddMinutes(30), false, user.SRole.ToString());</span><br><span class="line">string hashTicket &#x3D; FormsAuthentication.Encrypt(ticket);</span><br><span class="line">HttpCookie cookie &#x3D; new HttpCookie(FormsAuthentication.FormsCookieName, hashTicket);</span><br><span class="line">cookie.HttpOnly &#x3D; true;</span><br><span class="line">Response.Cookies.Add(cookie);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在普通用户控制器<code>User</code>和管理员控制器<code>Admin</code>中添加<code>[Authorize]</code>，使其进行验证</p>
</li>
<li><p>账号退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public ActionResult Logout()</span><br><span class="line">&#123;</span><br><span class="line">    FormsAuthentication.SignOut();</span><br><span class="line">    return RedirectToAction(&quot;Index&quot;, &quot;GuestBook&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h2 id="四、其他实现"><a href="#四、其他实现" class="headerlink" title="四、其他实现"></a>四、其他实现</h2><h3 id="数据库实现"><a href="#数据库实现" class="headerlink" title="数据库实现"></a>数据库实现</h3><ol>
<li><p>数据库上下文</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class GBSDBContext : DbContext</span><br><span class="line">&#123;</span><br><span class="line">    public DbSet&lt;Guestbook&gt; Guestbooks &#123; get; set; &#125;</span><br><span class="line">    public DbSet&lt;Admin&gt; Admins &#123; get; set; &#125;</span><br><span class="line">    public DbSet&lt;User&gt; Users &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>用户角色信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class User</span><br><span class="line">&#123;</span><br><span class="line">    public int UserId &#123; get; set; &#125;</span><br><span class="line">    [System.ComponentModel.DataAnnotations.Required(ErrorMessage &#x3D; &quot;邮箱不能为空&quot;)]</span><br><span class="line">    [EmailAddress(ErrorMessage &#x3D;&quot;邮箱格式不对&quot;)]</span><br><span class="line">    public string Email &#123; get; set; &#125;</span><br><span class="line">    [Unique]</span><br><span class="line">    [System.ComponentModel.DataAnnotations.Required(ErrorMessage &#x3D; &quot;用户名不能为空&quot;)]</span><br><span class="line">    [MaxLength(10,ErrorMessage &#x3D;&quot;用户名长度不能大于10个字符&quot;)]</span><br><span class="line">    public string Name &#123; get; set; &#125;</span><br><span class="line">    [System.ComponentModel.DataAnnotations.Required(ErrorMessage &#x3D; &quot;密码不能为空&quot;)]</span><br><span class="line">    [MaxLength(20, ErrorMessage &#x3D; &quot;密码长度不能大于20个字符&quot;)]</span><br><span class="line">    [MinLength(6,ErrorMessage &#x3D;&quot;密码长度不能少于6个字符&quot;)]</span><br><span class="line">    [DataType(DataType.Password)]</span><br><span class="line">    public string Password &#123; get; set; &#125;</span><br><span class="line">    public SystemRole SRole &#123; get; set; &#125;</span><br><span class="line">    public virtual ICollection&lt;Guestbook&gt; Guestbooks &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>留言本信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Guestbook</span><br><span class="line">&#123;</span><br><span class="line">    public int GuestbookId &#123; get; set; &#125;</span><br><span class="line">    [Required(ErrorMessage &#x3D; &quot;留言标题不能为空&quot;)]</span><br><span class="line">    [MaxLength(20, ErrorMessage &#x3D; &quot;留言标题不超过20个字符&quot;)]</span><br><span class="line">    public string Title &#123; get; set; &#125;   &#x2F;&#x2F;留言标题</span><br><span class="line">    [Required(ErrorMessage &#x3D; &quot;留言内容不能为空&quot;)]</span><br><span class="line">    [MinLength(1, ErrorMessage &#x3D; &quot;留言内容不少于1个字符&quot;)]</span><br><span class="line">    public string Content &#123; get; set; &#125; &#x2F;&#x2F;留言内容</span><br><span class="line">    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]</span><br><span class="line">    public DateTime CreatedOn &#123; get; set; &#125; &#x2F;&#x2F;创建日期时间</span><br><span class="line">    public bool isPass &#123; get; set; &#125;</span><br><span class="line">    public virtual User User &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="默认模板实现"><a href="#默认模板实现" class="headerlink" title="默认模板实现"></a>默认模板实现</h3><ol>
<li><p>账号登录、注册部分</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>@ViewBag.Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"~/Content/guestbook-index.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"~/IconFont/fa/css/all.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"~/IconFont/iconfont/iconfont.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"~/Image/bg.jpg"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"guestbook clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/GuestBook/Index"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-angle-double-left"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>返回<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>欢迎访问留言本<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buttons"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"button login"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>@Html.ActionLink("用户登录", "Login", "Account")<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"button register"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>@Html.ActionLink("用户注册", "Register", "Account")<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main-login"</span>&gt;</span></span><br><span class="line">                @RenderBody()</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> 2020-@DateTime.Now.Year RuanXinWei版权所有<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>后台部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;@ViewBag.NAME 后台&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;Content&#x2F;admin-index.css&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;title&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;welcome&quot;&gt;</span><br><span class="line">            欢迎 @ViewBag.NAME !</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;main clearfix&quot;&gt;</span><br><span class="line">        @RenderBody()</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="五、主要结果截图-1"><a href="#五、主要结果截图-1" class="headerlink" title="五、主要结果截图"></a>五、主要结果截图</h2><ol>
<li>留言本主页面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222124.png" alt="image-20201204134210521" style="zoom:33%;" /></li>
<li>注册页面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201207222125.png" alt="image-20201204134359392" style="zoom:33%;" /></li>
<li>登录页面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201210095803.png" width="100%" style="zoom:120%;" ></li>
<li>用户页面<img src ="https://gitee.com/ruanxinwei/image/raw/master/image/20201210095804.png" width="100%" style="zoom:120%;" ></li>
<li>管理员页面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201210095805.png" width="100%"></li>
<li>确认信息页面<img src="https://gitee.com/ruanxinwei/image/raw/master/image/20201210095806.png" width="100%">

</li>
</ol>
<div STYLE="page-break-after: always;"></div>

<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>​    首先，我很庆幸选择了学习.NET架构，因为通过学习这门课程，让我了解到了前端和后台可以通过MVC进行配合。就在今年完成数据库课程设计的时候，我就十分迷茫，不知道该如何将前端和后台进行配合，虽然最后使用了PHP进行后台操作数据库完成了课程设计，但是深刻体会到了用字符串保存SQL，网站整体样式的设计等痛苦。</p>
<p>​    但是在我学习完.NET架构后，学会了用Code-first来操作数据库，这种方式不仅能够避免在编写SQL的时候出现字符错误，还能够很好地进行保存，修改等一系列操作，通过类操作数据库的好处就从而体现出来了。还有在为网站设计整体风格的时候，通过添加布局页，一方面大大减少了代码的冗余量，另一方面也提高了开发的效率。</p>
<p>​    总的来说，从最开始的客户端技术编程到最后的MVC编程，让我慢慢从只会做一些简单的样式到能够实现一些具有实际意义的样式，让我从只会做样式到能够配合后台来实现一个实际的网站。到最后，回顾这门课的学习，虽然过程真的很苦，每天熬夜干代码，但是收获到的结果也是十分丰厚的。</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/HTML/">HTML</a><a class="link-muted mr-2" rel="tag" href="/tags/CSS/">CSS</a><a class="link-muted mr-2" rel="tag" href="/tags/Javascript/">Javascript</a><a class="link-muted mr-2" rel="tag" href="/tags/MVC/">MVC</a></div><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f097725cc965762" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/01/23/Flask%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Flask学习笔记</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/06/14/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="level-item">前端学习笔记</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: 'c6f04c0e67c76035baf4403616435e69',
            repo: 'ruan-xinwei.github.io',
            owner: 'Ruan-XinWei',
            clientID: '6ebcb08ce6e1f7e15d8c',
            clientSecret: '5311d843c82a1be19e345c2d1a561f1012b0c464',
            admin: "Ruan-XinWei",
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.gif" alt="阮新伟"></figure><p class="title is-size-4 is-block line-height-inherit">阮新伟</p><p class="is-size-6 is-block">学生</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国，江西</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Ruan-XinWei"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1169348105&amp;site=qq&amp;menu=yes"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Mail" href="mailto:1169348105@qq.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="http://ruanxinwei.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">My Blog</span></span><span class="level-right"><span class="level-item tag">ruanxinwei.cn</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MVC/"><span class="level-start"><span class="level-item">MVC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">学习笔记</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><a class="media-left" href="/2021/04/04/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/"><p class="image is-64x64"><img class="thumbnail" src="/./image/duilio-fonseca-kaMtGPNJ8P8-unsplash.jpg" alt="算法笔记"></p></a><div class="media-content size-small"><p><time dateTime="2021-04-04T11:45:41.000Z">2021-04-04</time></p><p class="title is-6"><a class="link-muted" href="/2021/04/04/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/">算法笔记</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></p></div></article><article class="media"><a class="media-left" href="/2021/02/04/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><p class="image is-64x64"><img class="thumbnail" src="/./image/3f07258d4f0c3679730a47831c823a90.jpg" alt="Java基础知识"></p></a><div class="media-content size-small"><p><time dateTime="2021-02-04T15:37:16.000Z">2021-02-04</time></p><p class="title is-6"><a class="link-muted" href="/2021/02/04/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">Java基础知识</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Java/">Java</a></p></div></article><article class="media"><a class="media-left" href="/2021/01/23/Flask%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><p class="image is-64x64"><img class="thumbnail" src="/./image/f32f8eda7fb895bb9f75bc00dcdb80e5.jpg" alt="Flask学习笔记"></p></a><div class="media-content size-small"><p><time dateTime="2021-01-23T15:37:16.000Z">2021-01-23</time></p><p class="title is-6"><a class="link-muted" href="/2021/01/23/Flask%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Flask学习笔记</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></p></div></article><article class="media"><a class="media-left" href="/2020/12/10/%E5%88%9D%E5%85%A5MVC-%E4%BB%8E%E5%89%8D%E7%AB%AF%E5%88%B0%E5%90%8E%E5%8F%B0/"><p class="image is-64x64"><img class="thumbnail" src="/./image/3f07258d4f0c3679730a47831c823a90.jpg" alt="初入MVC--从前端到后台"></p></a><div class="media-content size-small"><p><time dateTime="2020-12-10T02:36:46.000Z">2020-12-10</time></p><p class="title is-6"><a class="link-muted" href="/2020/12/10/%E5%88%9D%E5%85%A5MVC-%E4%BB%8E%E5%89%8D%E7%AB%AF%E5%88%B0%E5%90%8E%E5%8F%B0/">初入MVC--从前端到后台</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/MVC/">MVC</a></p></div></article><article class="media"><a class="media-left" href="/2020/06/14/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><p class="image is-64x64"><img class="thumbnail" src="/./image/635a74d22a202db9c7b3f51d1eba1b8e.jpg" alt="前端学习笔记"></p></a><div class="media-content size-small"><p><time dateTime="2020-06-14T08:32:23.000Z">2020-06-14</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/14/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">前端学习笔记</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">十二月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag">CSS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flask/"><span class="tag">Flask</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Javascript/"><span class="tag">Javascript</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MVC/"><span class="tag">MVC</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9F%BA%E7%A1%80/"><span class="tag">基础</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#客户端技术编程"><span class="mr-2">1</span><span>客户端技术编程</span></a><ul class="menu-list"><li><a class="is-flex" href="#一、主要完成内容"><span class="mr-2">1.1</span><span>一、主要完成内容</span></a></li><li><a class="is-flex" href="#二、主要功能实现"><span class="mr-2">1.2</span><span>二、主要功能实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#网站整体布局"><span class="mr-2">1.2.1</span><span>网站整体布局</span></a></li><li><a class="is-flex" href="#顶部菜单模块"><span class="mr-2">1.2.2</span><span>顶部菜单模块</span></a></li><li><a class="is-flex" href="#展示图片的gallery模块"><span class="mr-2">1.2.3</span><span>展示图片的gallery模块</span></a></li></ul></li><li><a class="is-flex" href="#三、额外功能实现"><span class="mr-2">1.3</span><span>三、额外功能实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#日间模式和夜间模式切换"><span class="mr-2">1.3.1</span><span>日间模式和夜间模式切换</span></a></li><li><a class="is-flex" href="#缓慢切入"><span class="mr-2">1.3.2</span><span>缓慢切入</span></a></li></ul></li><li><a class="is-flex" href="#四、主要结果截图"><span class="mr-2">1.4</span><span>四、主要结果截图</span></a></li></ul></li><li><a class="is-flex" href="#JavaScript编程"><span class="mr-2">2</span><span>JavaScript编程</span></a><ul class="menu-list"><li><a class="is-flex" href="#一、主要完成内容-1"><span class="mr-2">2.1</span><span>一、主要完成内容</span></a></li><li><a class="is-flex" href="#二、主要功能实现-1"><span class="mr-2">2.2</span><span>二、主要功能实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#随机产生一个四位验证码"><span class="mr-2">2.2.1</span><span>随机产生一个四位验证码</span></a></li><li><a class="is-flex" href="#验证四位验证码是否正确"><span class="mr-2">2.2.2</span><span>验证四位验证码是否正确</span></a></li><li><a class="is-flex" href="#随机产生一个图片缺口"><span class="mr-2">2.2.3</span><span>随机产生一个图片缺口</span></a></li><li><a class="is-flex" href="#随机产生图片"><span class="mr-2">2.2.4</span><span>随机产生图片</span></a></li><li><a class="is-flex" href="#通过滑块进行图片验证"><span class="mr-2">2.2.5</span><span>通过滑块进行图片验证</span></a></li></ul></li><li><a class="is-flex" href="#三、额外功能实现-1"><span class="mr-2">2.3</span><span>三、额外功能实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#自动获取焦点"><span class="mr-2">2.3.1</span><span>自动获取焦点</span></a></li><li><a class="is-flex" href="#监听回车"><span class="mr-2">2.3.2</span><span>监听回车</span></a></li></ul></li><li><a class="is-flex" href="#四、主要样式实现"><span class="mr-2">2.4</span><span>四、主要样式实现</span></a></li><li><a class="is-flex" href="#五、主要结果截图"><span class="mr-2">2.5</span><span>五、主要结果截图</span></a></li></ul></li><li><a class="is-flex" href="#GuestBookSystem"><span class="mr-2">3</span><span>GuestBookSystem</span></a><ul class="menu-list"><li><a class="is-flex" href="#一、主要完成内容-2"><span class="mr-2">3.1</span><span>一、主要完成内容</span></a></li><li><a class="is-flex" href="#二、主要功能实现-2"><span class="mr-2">3.2</span><span>二、主要功能实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#非特定角色功能"><span class="mr-2">3.2.1</span><span>非特定角色功能</span></a></li><li><a class="is-flex" href="#普通用户功能"><span class="mr-2">3.2.2</span><span>普通用户功能</span></a></li><li><a class="is-flex" href="#管理员功能"><span class="mr-2">3.2.3</span><span>管理员功能</span></a></li></ul></li><li><a class="is-flex" href="#三、部分额外功能"><span class="mr-2">3.3</span><span>三、部分额外功能</span></a><ul class="menu-list"><li><a class="is-flex" href="#超长文本省略处理"><span class="mr-2">3.3.1</span><span>超长文本省略处理</span></a></li><li><a class="is-flex" href="#用户验证"><span class="mr-2">3.3.2</span><span>用户验证</span></a></li></ul></li><li><a class="is-flex" href="#四、其他实现"><span class="mr-2">3.4</span><span>四、其他实现</span></a><ul class="menu-list"><li><a class="is-flex" href="#数据库实现"><span class="mr-2">3.4.1</span><span>数据库实现</span></a></li><li><a class="is-flex" href="#默认模板实现"><span class="mr-2">3.4.2</span><span>默认模板实现</span></a></li></ul></li><li><a class="is-flex" href="#五、主要结果截图-1"><span class="mr-2">3.5</span><span>五、主要结果截图</span></a></li></ul></li><li><a class="is-flex" href="#小结"><span class="mr-2">4</span><span>小结</span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatar.gif" alt="小阮笔记" height="28"></a><p class="size-small"><span>&copy; 2021 阮新伟</span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://ruan-xinwei.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://s9.cnzz.com/z_stat.php?id=1279068007&amp;web_id=1279068007" async></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>